{"ast":null,"code":"var _jsxFileName = \"/Users/yimeng/Documents/fish/src/components/NewUser.js\";\nimport React from 'react';\nimport { Button, Form, Input } from 'semantic-ui-react';\nimport { Modal, Message } from 'semantic-ui-react';\nimport { bS } from '../BabyTalk';\n\nclass NewUser extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      _userName: null,\n      _passWord: null,\n      _repeatPass: null,\n      _email: null,\n      _location: null,\n      errorState: {\n        // field is in error?\n        _userName: false,\n        _passWord: false,\n        _repeatPass: false,\n        _email: false,\n        _location: false\n      },\n      errorMessage: null,\n      inError: false,\n      success: false\n    };\n    this.localChange = this.handleChange.bind(this);\n    this.localSubmit = this.handleSubmit.bind(this);\n  }\n\n  //  write the onChange callback\n  //    put user input into component state\n  //  write the onSubmit callback\n  //    create a newUser structure/JSON using component state\n  //    talk to the babyServer  --- deal with newUser blah\n  //       babyServer will say yes or no.. or give an error?\n  //\n  //    if  all OK,\n  //          show user a message\n  async handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    }); // reset errorMessage\n\n    this.setState({\n      inError: false\n    }); // user is typing in e.target.name\n\n    let eS = this.state.errorState;\n    eS[e.target.name] = false; // reset error if true\n\n    if (e.target.name === '_userName' && e.target.value.length >= 5) {\n      var data = await bS.post(\"/userExists\", {\n        userName: e.target.value\n      });\n      eS[\"_userName\"] = data; //{content: \"This fish already exists...\",\n      //\t\t     pointing: 'below'};  // reset error if true\n\n      this.setState({\n        errorState: eS\n      }); // async call\n    }\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault(); // validation of inputs\n\n    var eS = this.state.errorState;\n    eS._userName = this.state._userName == null || this.state._userName.length < 5;\n    eS._passWord = this.state._passWord == null;\n    eS._repeatPass = this.state._passWord !== this.state._repeatPass || eS._passWord;\n    eS._email = this.state._email == null;\n    var anyError = eS._userName || eS._repeatPass || eS._email || eS._passWord;\n\n    if (anyError) {\n      this.setState({\n        errorState: eS\n      });\n      return;\n    } // no errors, lets hit the babyServer\n\n\n    var data = await bS.post(\"/register\", {\n      userName: this.state._userName,\n      passWord: this.state._passWord,\n      email: this.state._email,\n      location: this.state._location\n    });\n\n    if (data.id === -1) {\n      this.setState({\n        inError: true\n      });\n      this.setState({\n        errorMessage: \"Fish not created.. fish egg was bad?\"\n      });\n    } else {\n      this.setState({\n        success: true\n      });\n    }\n  }\n\n  goBack(rE, data) {\n    this.setState({\n      success: false\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(SuccessModal, {\n      visible: this.state.success,\n      userName: this.state._userName,\n      goLogin: this.props.kill,\n      goBack: this.goBack.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.localSubmit,\n      error: this.state.inError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(Form.Field, {\n      required: true,\n      error: this.state.errorState._userName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 8\n      }\n    }, \"User Name\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"User Name\",\n      icon: \"user\",\n      type: \"text\",\n      name: \"_userName\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      required: true,\n      error: this.state.errorState._passWord,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 5\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"Password\",\n      icon: \"lock\",\n      type: \"password\",\n      name: \"_passWord\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      content: this.state.passMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      required: true,\n      error: this.state.errorState._repeatPass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 5\n      }\n    }, \"Enter Password Again\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"Password\",\n      icon: \"lock\",\n      type: \"password\",\n      name: \"_repeatPass\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      required: true,\n      error: this.state.errorState._email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 5\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"email\",\n      icon: \"mail\",\n      type: \"email\",\n      name: \"_email\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      content: this.state.emailMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 5\n      }\n    }, \"Location\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"Location\",\n      icon: \"location arrow\",\n      type: \"text\",\n      name: \"_location\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      color: \"green\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 8\n      }\n    }, \" Make a new Fish\"), /*#__PURE__*/React.createElement(Message, {\n      error: true,\n      content: this.state.errorMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 8\n      }\n    })));\n  }\n\n}\n\nclass SuccessModal extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(Modal, {\n      open: this.props.visible,\n      dimmer: \"blurring\",\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }, this.props.userName, \", Welcome to 3Fish\"), /*#__PURE__*/React.createElement(Modal.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 3\n      }\n    }, \"A new fish was born.\"), /*#__PURE__*/React.createElement(Button, {\n      color: \"blue\",\n      content: \"Make another fish\",\n      onClick: this.props.goBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 3\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      color: \"green\",\n      content: \"Login to 3Fish\",\n      onClick: this.props.goLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 3\n      }\n    })));\n  }\n\n}\n\nexport default NewUser;","map":{"version":3,"sources":["/Users/yimeng/Documents/fish/src/components/NewUser.js"],"names":["React","Button","Form","Input","Modal","Message","bS","NewUser","Component","state","_userName","_passWord","_repeatPass","_email","_location","errorState","errorMessage","inError","success","localChange","handleChange","bind","localSubmit","handleSubmit","e","setState","target","name","value","eS","length","data","post","userName","preventDefault","anyError","passWord","email","location","id","goBack","rE","render","props","kill","passMessage","emailMessage","SuccessModal","visible","goLogin"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Button, Form, Input } from 'semantic-ui-react'\nimport { Modal, Message } from 'semantic-ui-react'\n\nimport {bS} from '../BabyTalk'\n\nclass NewUser extends React.Component {\n\n    state = {\n\t_userName : null,\n\t_passWord : null,\n\t_repeatPass : null,\n\t_email: null,\n\t_location: null,\n\n\terrorState : {  // field is in error?\n\t    _userName: false,\n\t    _passWord : false,\n\t    _repeatPass : false,\n\t    _email: false,\n\t    _location: false,\n\t},\n\terrorMessage: null,\n\tinError: false,\n\tsuccess: false\n    }\n\n    //  write the onChange callback\n    //    put user input into component state\n\n    //  write the onSubmit callback\n    //    create a newUser structure/JSON using component state\n    //    talk to the babyServer  --- deal with newUser blah\n    //       babyServer will say yes or no.. or give an error?\n    //\n    //    if  all OK,\n    //          show user a message\n\n    async handleChange(e){\n\tthis.setState ({ [e.target.name] : e.target.value })\n\n\t// reset errorMessage\n\tthis.setState( { inError : false })\n\n\t// user is typing in e.target.name\n\t\n\tlet eS = this.state.errorState;\n\teS.[e.target.name] = false  // reset error if true\n\n\tif (e.target.name === '_userName' && e.target.value.length >= 5){\n\t    \n\t   var data = await bS.post(\"/userExists\", {\n\t     \tuserName: e.target.value\n\t    })\n\t    eS.[\"_userName\"] = data;\n\t    //{content: \"This fish already exists...\",\n\t    //\t\t     pointing: 'below'};  // reset error if true\n\t    this.setState ({ errorState : eS }) // async call\n\t}\n\n    }\nlocalChange = this.handleChange.bind(this)\n\n\t\n    async handleSubmit(e){\n\t\n\te.preventDefault();\n\n\t// validation of inputs\n\tvar eS = this.state.errorState;\n\teS._userName  = (this.state._userName == null) || (this.state._userName.length < 5)\n\teS._passWord  = (this.state._passWord == null)\n\teS._repeatPass  = (this.state._passWord !== this.state._repeatPass) || eS._passWord\n\teS._email  = (this.state._email == null)\n\n\tvar anyError = \teS._userName  || eS._repeatPass  || eS._email || eS._passWord\n\n\tif (anyError){\n\t    this.setState({errorState : eS })\n\t    return\n\t}\n\t// no errors, lets hit the babyServer\n\t  var data = await bS.post(\"/register\", {\n\t\t\tuserName: this.state._userName,\n\t\t\tpassWord: this.state._passWord,\n\t\t\temail: this.state._email,\n\t\t\tlocation: this.state._location\n\t  })\n\n\tif (data.id === -1){\n\t    this.setState({inError: true})\n\t    this.setState({errorMessage: \"Fish not created.. fish egg was bad?\"})\n\t} else {\n\t    this.setState({success: true})\n\t}\n\n    }\n    localSubmit = this.handleSubmit.bind(this)\n\n    goBack(rE, data){\n\tthis.setState({success: false})\n    }\n\n  render(){\n      return(\n\t      <div>\n\n\t      <SuccessModal visible = {this.state.success}\n                 userName = {this.state._userName}\n                 goLogin = {this.props.kill}\n                 goBack = {this.goBack.bind(this)}\n\t      />\n\t      \n\t  \n\t      <Form onSubmit = {this.localSubmit} error = {this.state.inError}>\n\t      <Form.Field required \t  error = {this.state.errorState._userName}\n>\n\t      <label>User Name</label>\n\t\t\t\t<Input placeholder='User Name' icon='user' type=\"text\"\n\t\t            \tname = \"_userName\" onChange= {this.localChange} \n          iconPosition='left'\n\t      />\n\t\t\t</Form.Field>\n\n\t\t\t<Form.Field required error = {this.state.errorState._passWord} >\n\t\t\t\t<label>Password</label>\n\t\t\t\t<Input placeholder='Password' icon='lock' type=\"password\"\n\t\t\tname = \"_passWord\" onChange= {this.localChange} \n\t\t\ticonPosition='left'\n\n\t\t\tcontent={this.state.passMessage}\n\t\t\t  />\n\t\t\t</Form.Field>\n\n\t      <Form.Field required error = {this.state.errorState._repeatPass} >\n\t\t\t\t<label>Enter Password Again</label>\n\t\t\t\t<Input placeholder='Password' icon='lock' type=\"password\"\n\t\t\tname = \"_repeatPass\" onChange= {this.localChange} \n\t\t\ticonPosition='left'\n\n\t\t\t/>\n\t\t\t</Form.Field>\n\t\t\t<Form.Field required \terror = {this.state.errorState._email} >\n\t\t\t\t<label>Email</label>\n\t\t\t\t<Input placeholder='email' icon='mail' type=\"email\"\n\t\t\tname = \"_email\" onChange= {this.localChange} \n\t\t\ticonPosition='left'\n\t\t\tcontent={this.state.emailMessage}\n\n\t\t\t/>\n\t\t\t</Form.Field>\n\t\t\t<Form.Field >\n\t\t\t\t<label>Location</label>\n\t\t\t\t<Input placeholder='Location' icon='location arrow' type=\"text\"\n\t\t\tname = \"_location\" onChange= {this.localChange} \n\t\ticonPosition='left'/>\n\t\t\t</Form.Field>\n\t      <Button color='green'  > Make a new Fish</Button>\n\t      <Message error content = {this.state.errorMessage} />\n\t  \n\t      </Form>\n\t  </div>\n      )\n}\n}\n\n\nclass SuccessModal  extends React.Component {\n\n    render(){\n\treturn (\n        <Modal \n        open = {this.props.visible}\n        dimmer = \"blurring\"\n        size=\"small\"\n        >\n        <Modal.Header>{this.props.userName}, Welcome to 3Fish</Modal.Header>\n          <Modal.Content>\n\t\t<p>A new fish was born.</p>\n\n\t\t<Button color='blue' content = 'Make another fish'\n\t    onClick = {this.props.goBack}/>\n\n\t\t<Button color='green' content = 'Login to 3Fish'\n\t    onClick = {this.props.goLogin}/>\n\t    \n          </Modal.Content>\n\t\t</Modal>\n\t);\n    }\n}\n\nexport default NewUser;\n\n"]},"metadata":{},"sourceType":"module"}