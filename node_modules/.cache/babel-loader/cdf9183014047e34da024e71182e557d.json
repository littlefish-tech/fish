{"ast":null,"code":"import _defineProperty from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Button,Modal,Form,Input,Message}from'semantic-ui-react';var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(){var _this;_classCallCheck(this,Profile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={_userName:_this.props.curUser.name,_passWord:_this.props.curUser.password,_repeatPass:_this.props.curUser.password,_email:_this.props.curUser.email,_location:_this.props.curUser.location,errorState:{// field is in error?\n_passWord:false,_repeatPass:false},errorMessage:null,inError:false,success:false,allowSubmit:false,loading:false,updatedMessage:null,updatedVisible:false,cancelDisabled:false};_this.localChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.localSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Profile,[{key:\"handleChange\",//  write the onChange callback\n//    put user input into component state\n//  write the onSubmit callback\n//    create a newUser structure/JSON using component state\n//    talk to the babyServer  --- deal with newUser blah\n//       babyServer will say yes or no.. or give an error?\n//\n//    if  all OK,\n//          show user a message\nvalue:function handleChange(e){this.setState(_defineProperty({},e.target.name,e.target.value));this.setState({allowSubmit:true});// reset errorMessage\nthis.setState({inError:false});// user is typing in e.target.name\nvar eS=this.state.errorState;eS[e.target.name]=false;// reset error if true\nthis.setState({errorState:eS});}},{key:\"handleSubmit\",value:function handleSubmit(e){var _this2=this;e.preventDefault();this.setState({loading:true});var eS=this.state.errorState;eS._passWord=this.state._passWord==null;eS._repeatPass=this.state._passWord!==this.state._repeatPass||eS._passWord;var anyError=eS._repeatPass||eS._passWord;if(anyError){this.setState({errorState:eS});return;}axios.post(\"/updateUser\",{userName:this.state._userName,passWord:this.state._passWord,email:this.state._email,location:this.state._location},{timeout:2000}// 2000 milliseconds \n).then(function(res){console.log(res.data);_this2.props.updateAppState(_this2.props.appKey,res.data);_this2.setState({allowSubmit:false});// this.props.kill()\n_this2.setState({loading:false});_this2.setState({updatedVisible:true});_this2.setState({cancelDisabled:true});_this2.setState({updatedMessage:\"Fish Profile Updated\"});}).catch(function(err){console.log(\"timed out\");});}},{key:\"killVisible\",value:function killVisible(e){this.setState({cancelDisabled:false});this.setState({updatedVisible:false});this.props.kill();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Modal,{open:this.props.showUpdate,closeIcon:true,onClose:this.props.kill},/*#__PURE__*/React.createElement(Modal.Header,null,\"Update \",this.props.curUser.name,\" profile\"),/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,{onSubmit:this.localSubmit,error:this.state.inError,loading:this.state.loading},/*#__PURE__*/React.createElement(Form.Field,{required:true,error:this.state.errorState._passWord},/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(Input,{placeholder:\"New Password\",icon:\"lock\",type:\"password\",name:\"_passWord\",onChange:this.localChange,iconPosition:\"left\",content:this.state.passMessage})),/*#__PURE__*/React.createElement(Form.Field,{required:true,error:this.state.errorState._repeatPass},/*#__PURE__*/React.createElement(\"label\",null,\"Enter Password Again\"),/*#__PURE__*/React.createElement(Input,{placeholder:\"repeat Password\",icon:\"lock\",type:\"password\",name:\"_repeatPass\",onChange:this.localChange,iconPosition:\"left\"})),/*#__PURE__*/React.createElement(Form.Field,{required:true,error:this.state.errorState._email},/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(Input,{placeholder:this.props.curUser.email,icon:\"mail\",type:\"email\",name:\"_email\",onChange:this.localChange,iconPosition:\"left\",content:this.state.emailMessage})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Location\"),/*#__PURE__*/React.createElement(Input,{placeholder:this.props.curUser.location,icon:\"location arrow\",type:\"text\",name:\"_location\",onChange:this.localChange,iconPosition:\"left\"})),/*#__PURE__*/React.createElement(Button,{disabled:!this.state.allowSubmit,color:\"green\"},\" Update Fish\"),/*#__PURE__*/React.createElement(Button,{onClick:this.killVisible.bind(this),color:\"grey\",disabled:this.state.cancelDisabled},\" Cancel \"),/*#__PURE__*/React.createElement(Message,{error:true,content:this.state.errorMessage}),/*#__PURE__*/React.createElement(Message,{info:true,floating:true,size:\"big\",onClick:this.killVisible.bind(this),onDismiss:this.killVisible.bind(this),hidden:!this.state.updatedVisible,content:this.state.updatedMessage})))),/*#__PURE__*/React.createElement(Modal.Actions,null));}}]);return Profile;}(React.Component);export default Profile;","map":{"version":3,"sources":["/Users/yimeng/Documents/fish/src/components/Profile.js"],"names":["React","axios","Button","Modal","Form","Input","Message","Profile","state","_userName","props","curUser","name","_passWord","password","_repeatPass","_email","email","_location","location","errorState","errorMessage","inError","success","allowSubmit","loading","updatedMessage","updatedVisible","cancelDisabled","localChange","handleChange","bind","localSubmit","handleSubmit","e","setState","target","value","eS","preventDefault","anyError","post","userName","passWord","timeout","then","res","console","log","data","updateAppState","appKey","catch","err","kill","showUpdate","passMessage","emailMessage","killVisible","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Button, Modal, Form, Input, Message } from 'semantic-ui-react'\n\nclass Profile extends React.Component{\n    state = {\n        _userName :this.props.curUser.name,\n        _passWord : this.props.curUser.password,\n        _repeatPass : this.props.curUser.password,\n        _email: this.props.curUser.email,\n        _location: this.props.curUser.location,\n        \n        errorState : {  // field is in error?\n            _passWord : false,\n            _repeatPass : false\n        },\n        errorMessage: null,\n        inError: false,\n        success: false,\n        allowSubmit: false,\n        loading: false,\n        updatedMessage: null,\n        updatedVisible: false,\n\tcancelDisabled: false\n    }\n    \n    \n    //  write the onChange callback\n    //    put user input into component state\n    \n    //  write the onSubmit callback\n    //    create a newUser structure/JSON using component state\n    //    talk to the babyServer  --- deal with newUser blah\n    //       babyServer will say yes or no.. or give an error?\n    //\n    //    if  all OK,\n    //          show user a message\n    \n    handleChange(e){\n        this.setState ({ [e.target.name] : e.target.value })\n        this.setState({allowSubmit: true})\n\t\n        // reset errorMessage\n        this.setState( { inError : false })\n\t\n        // user is typing in e.target.name\n        \n        let eS = this.state.errorState;\n        eS.[e.target.name] = false  // reset error if true\n        this.setState ({ errorState : eS })\n\t\n    }\n    localChange = this.handleChange.bind(this)\n\n    handleSubmit(e){\n        e.preventDefault()\n        this.setState({loading: true})\n        var eS = this.state.errorState;\n        eS._passWord  = (this.state._passWord == null)\n        eS._repeatPass  = (this.state._passWord !== this.state._repeatPass) || eS._passWord\n\t\n        var anyError = eS._repeatPass || eS._passWord\n\t\n        if (anyError){\n            this.setState({errorState : eS })\n            return\n        }\n\n        axios.post(\"/updateUser\", {\n\t    userName: this.state._userName,\n\t    passWord: this.state._passWord,\n\t    email: this.state._email,\n\t    location: this.state._location\n\t}, {timeout: 2000} // 2000 milliseconds \n\t\t  )\n\t    .then(res => {\n\t\tconsole.log(res.data)\n\t\tthis.props.updateAppState(this.props.appKey, res.data);\n\t\tthis.setState({allowSubmit: false})\n\t\t// this.props.kill()\n\t\tthis.setState({loading:false})\n\t\tthis.setState({updatedVisible: true})\n\t\tthis.setState({cancelDisabled: true})\n\t\tthis.setState({updatedMessage: \"Fish Profile Updated\"})\n\t    }).catch(err => {\n\t\tconsole.log(\"timed out\");\n\t    })\n    }\n    localSubmit = this.handleSubmit.bind(this)\n\n    killVisible(e){\n\tthis.setState({cancelDisabled: false})\n\tthis.setState({updatedVisible:false})\n\tthis.props.kill()\n    }\n\n    render(){\n\treturn (\n\t\t<Modal\n            open={this.props.showUpdate}\n            closeIcon\n            onClose={this.props.kill}\n\t\t>\n\t\t<Modal.Header>Update {this.props.curUser.name} profile</Modal.Header>\n\t\t<Modal.Content>\n\t\t<div>\n\n\n\t\t<Form onSubmit = {this.localSubmit} error = {this.state.inError}  loading = {this.state.loading}>\n\n\t\t<Form.Field required error = {this.state.errorState._passWord} >\n\t\t<label>Password</label>\n\t\t<Input placeholder=\"New Password\" icon='lock' type=\"password\"\n\t    name = \"_passWord\" onChange= {this.localChange} \n\t    iconPosition='left'\n\t    content={this.state.passMessage}\n\t\t/>\n\t\t</Form.Field>\n\n\t\t<Form.Field required error = {this.state.errorState._repeatPass} >\n\t\t<label>Enter Password Again</label>\n\t\t<Input placeholder=\"repeat Password\" icon='lock' type=\"password\"\n\t    name = \"_repeatPass\" onChange= {this.localChange} \n\t    iconPosition='left'\n\n\t\t/>\n\t\t</Form.Field>\n\t\t<Form.Field required \terror = {this.state.errorState._email} >\n\t\t<label>Email</label>\n\t\t<Input placeholder={this.props.curUser.email} icon='mail' type=\"email\"\n\t    name = \"_email\" onChange= {this.localChange} \n\t    iconPosition='left'\n\t    content={this.state.emailMessage}\n\n\t\t/>\n\t\t</Form.Field>\n\t\t<Form.Field >\n\t\t<label>Location</label>\n\t\t<Input placeholder={this.props.curUser.location} icon='location arrow' type=\"text\"\n\t    name = \"_location\" onChange= {this.localChange} \n\t    iconPosition='left'/>\n\t\t</Form.Field>\n\t\t<Button disabled = {!this.state.allowSubmit} color='green'  > Update Fish</Button>\n\t\t<Button onClick={this.killVisible.bind(this)} color='grey'\n\t    disabled = {this.state.cancelDisabled}> Cancel </Button>\n\n\t\t<Message error content = {this.state.errorMessage} />\n\n\t\t<Message info floating size='big'\n            onClick={this.killVisible.bind(this)}\n            onDismiss={this.killVisible.bind(this)}\n            hidden = {!this.state.updatedVisible}\n            content = {this.state.updatedMessage} />\n\n\n\t    </Form>\n\t\t</div>\n\t\t</Modal.Content>\n\t\t<Modal.Actions>\n\n\t    </Modal.Actions>\n\t\t</Modal>\n\t)}\n}\n\nexport default Profile\n"]},"metadata":{},"sourceType":"module"}