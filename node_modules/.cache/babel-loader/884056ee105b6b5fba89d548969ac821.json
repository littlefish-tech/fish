{"ast":null,"code":"var _jsxFileName = \"/Users/yimeng/Documents/fish/src/components/Profile.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Button, Modal, Form, Input, Message } from 'semantic-ui-react';\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      _userName: this.props.curUser.name,\n      _passWord: this.props.curUser.password,\n      _repeatPass: this.props.curUser.password,\n      _email: this.props.curUser.email,\n      _location: this.props.curUser.location,\n      errorState: {\n        // field is in error?\n        _passWord: false,\n        _repeatPass: false\n      },\n      errorMessage: null,\n      inError: false,\n      success: false,\n      allowSubmit: false,\n      loading: false,\n      updatedMessage: null,\n      updatedVisible: false,\n      cancelDisabled: false\n    };\n    this.localChange = this.handleChange.bind(this);\n    this.localSubmit = this.handleSubmit.bind(this);\n  }\n\n  //  write the onChange callback\n  //    put user input into component state\n  //  write the onSubmit callback\n  //    create a newUser structure/JSON using component state\n  //    talk to the babyServer  --- deal with newUser blah\n  //       babyServer will say yes or no.. or give an error?\n  //\n  //    if  all OK,\n  //          show user a message\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n    this.setState({\n      allowSubmit: true\n    }); // reset errorMessage\n\n    this.setState({\n      inError: false\n    }); // user is typing in e.target.name\n\n    let eS = this.state.errorState;\n    eS[e.target.name] = false; // reset error if true\n\n    this.setState({\n      errorState: eS\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      loading: true\n    });\n    var eS = this.state.errorState;\n    eS._passWord = this.state._passWord == null;\n    eS._repeatPass = this.state._passWord !== this.state._repeatPass || eS._passWord;\n    var anyError = eS._repeatPass || eS._passWord;\n\n    if (anyError) {\n      this.setState({\n        errorState: eS\n      });\n      return;\n    }\n\n    axios.post(\"/updateUser\", {\n      userName: this.state._userName,\n      passWord: this.state._passWord,\n      email: this.state._email,\n      location: this.state._location\n    }, {\n      timeout: 2000\n    } // 2000 milliseconds \n    ).then(res => {\n      console.log(res.data);\n      this.props.updateAppState(this.props.appKey, res.data);\n      this.setState({\n        allowSubmit: false\n      }); // this.props.kill()\n\n      this.setState({\n        loading: false\n      });\n      this.setState({\n        updatedVisible: true\n      });\n      this.setState({\n        cancelDisabled: true\n      });\n      this.setState({\n        updatedMessage: \"Fish Profile Updated\"\n      });\n    }).catch(err => {\n      console.log(\"timed out\");\n    });\n  }\n\n  killVisible(e) {\n    this.setState({\n      cancelDisabled: false\n    });\n    this.setState({\n      updatedVisible: false\n    });\n    this.props.kill();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Modal, {\n      open: this.props.showUpdate,\n      closeIcon: true,\n      onClose: this.props.kill,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 3\n      }\n    }, \"Update \", this.props.curUser.name, \" profile\"), /*#__PURE__*/React.createElement(Modal.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.localSubmit,\n      error: this.state.inError,\n      loading: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Form.Field, {\n      required: true,\n      error: this.state.errorState._passWord,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 3\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"New Password\",\n      icon: \"lock\",\n      type: \"password\",\n      name: \"_passWord\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      content: this.state.passMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 3\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      required: true,\n      error: this.state.errorState._repeatPass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 3\n      }\n    }, \"Enter Password Again\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"repeat Password\",\n      icon: \"lock\",\n      type: \"password\",\n      name: \"_repeatPass\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 3\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      required: true,\n      error: this.state.errorState._email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 3\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: this.props.curUser.email,\n      icon: \"mail\",\n      type: \"email\",\n      name: \"_email\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      content: this.state.emailMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 3\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 3\n      }\n    }, \"Location\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: this.props.curUser.location,\n      icon: \"location arrow\",\n      type: \"text\",\n      name: \"_location\",\n      onChange: this.localChange,\n      iconPosition: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 3\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      disabled: !this.state.allowSubmit,\n      color: \"green\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 3\n      }\n    }, \" Update Fish\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.killVisible.bind(this),\n      color: \"grey\",\n      disabled: this.state.cancelDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 3\n      }\n    }, \" Cancel \"), /*#__PURE__*/React.createElement(Message, {\n      error: true,\n      content: this.state.errorMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 3\n      }\n    }), /*#__PURE__*/React.createElement(Message, {\n      info: true,\n      floating: true,\n      size: \"big\",\n      onClick: this.killVisible.bind(this),\n      onDismiss: this.killVisible.bind(this),\n      hidden: !this.state.updatedVisible,\n      content: this.state.updatedMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 3\n      }\n    })))), /*#__PURE__*/React.createElement(Modal.Actions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 3\n      }\n    }));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/yimeng/Documents/fish/src/components/Profile.js"],"names":["React","axios","Button","Modal","Form","Input","Message","Profile","Component","state","_userName","props","curUser","name","_passWord","password","_repeatPass","_email","email","_location","location","errorState","errorMessage","inError","success","allowSubmit","loading","updatedMessage","updatedVisible","cancelDisabled","localChange","handleChange","bind","localSubmit","handleSubmit","e","setState","target","value","eS","preventDefault","anyError","post","userName","passWord","timeout","then","res","console","log","data","updateAppState","appKey","catch","err","killVisible","kill","render","showUpdate","passMessage","emailMessage"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Button, Modal, Form, Input, Message } from 'semantic-ui-react'\n\nclass Profile extends React.Component{\n    state = {\n        _userName :this.props.curUser.name,\n        _passWord : this.props.curUser.password,\n        _repeatPass : this.props.curUser.password,\n        _email: this.props.curUser.email,\n        _location: this.props.curUser.location,\n        \n        errorState : {  // field is in error?\n            _passWord : false,\n            _repeatPass : false\n        },\n        errorMessage: null,\n        inError: false,\n        success: false,\n        allowSubmit: false,\n        loading: false,\n        updatedMessage: null,\n        updatedVisible: false,\n\tcancelDisabled: false\n    }\n    \n    \n    //  write the onChange callback\n    //    put user input into component state\n    \n    //  write the onSubmit callback\n    //    create a newUser structure/JSON using component state\n    //    talk to the babyServer  --- deal with newUser blah\n    //       babyServer will say yes or no.. or give an error?\n    //\n    //    if  all OK,\n    //          show user a message\n    \n    handleChange(e){\n        this.setState ({ [e.target.name] : e.target.value })\n        this.setState({allowSubmit: true})\n\t\n        // reset errorMessage\n        this.setState( { inError : false })\n\t\n        // user is typing in e.target.name\n        \n        let eS = this.state.errorState;\n        eS.[e.target.name] = false  // reset error if true\n        this.setState ({ errorState : eS })\n\t\n    }\n    localChange = this.handleChange.bind(this)\n\n    handleSubmit(e){\n        e.preventDefault()\n        this.setState({loading: true})\n        var eS = this.state.errorState;\n        eS._passWord  = (this.state._passWord == null)\n        eS._repeatPass  = (this.state._passWord !== this.state._repeatPass) || eS._passWord\n\t\n        var anyError = eS._repeatPass || eS._passWord\n\t\n        if (anyError){\n            this.setState({errorState : eS })\n            return\n        }\n\n        axios.post(\"/updateUser\", {\n\t    userName: this.state._userName,\n\t    passWord: this.state._passWord,\n\t    email: this.state._email,\n\t    location: this.state._location\n\t}, {timeout: 2000} // 2000 milliseconds \n\t\t  )\n\t    .then(res => {\n\t\tconsole.log(res.data)\n\t\tthis.props.updateAppState(this.props.appKey, res.data);\n\t\tthis.setState({allowSubmit: false})\n\t\t// this.props.kill()\n\t\tthis.setState({loading:false})\n\t\tthis.setState({updatedVisible: true})\n\t\tthis.setState({cancelDisabled: true})\n\t\tthis.setState({updatedMessage: \"Fish Profile Updated\"})\n\t    }).catch(err => {\n\t\tconsole.log(\"timed out\");\n\t    })\n    }\n    localSubmit = this.handleSubmit.bind(this)\n\n    killVisible(e){\n\tthis.setState({cancelDisabled: false})\n\tthis.setState({updatedVisible:false})\n\tthis.props.kill()\n    }\n\n    render(){\n\treturn (\n\t\t<Modal\n            open={this.props.showUpdate}\n            closeIcon\n            onClose={this.props.kill}\n\t\t>\n\t\t<Modal.Header>Update {this.props.curUser.name} profile</Modal.Header>\n\t\t<Modal.Content>\n\t\t<div>\n\n\n\t\t<Form onSubmit = {this.localSubmit} error = {this.state.inError}  loading = {this.state.loading}>\n\n\t\t<Form.Field required error = {this.state.errorState._passWord} >\n\t\t<label>Password</label>\n\t\t<Input placeholder=\"New Password\" icon='lock' type=\"password\"\n\t    name = \"_passWord\" onChange= {this.localChange} \n\t    iconPosition='left'\n\t    content={this.state.passMessage}\n\t\t/>\n\t\t</Form.Field>\n\n\t\t<Form.Field required error = {this.state.errorState._repeatPass} >\n\t\t<label>Enter Password Again</label>\n\t\t<Input placeholder=\"repeat Password\" icon='lock' type=\"password\"\n\t    name = \"_repeatPass\" onChange= {this.localChange} \n\t    iconPosition='left'\n\n\t\t/>\n\t\t</Form.Field>\n\t\t<Form.Field required \terror = {this.state.errorState._email} >\n\t\t<label>Email</label>\n\t\t<Input placeholder={this.props.curUser.email} icon='mail' type=\"email\"\n\t    name = \"_email\" onChange= {this.localChange} \n\t    iconPosition='left'\n\t    content={this.state.emailMessage}\n\n\t\t/>\n\t\t</Form.Field>\n\t\t<Form.Field >\n\t\t<label>Location</label>\n\t\t<Input placeholder={this.props.curUser.location} icon='location arrow' type=\"text\"\n\t    name = \"_location\" onChange= {this.localChange} \n\t    iconPosition='left'/>\n\t\t</Form.Field>\n\t\t<Button disabled = {!this.state.allowSubmit} color='green'  > Update Fish</Button>\n\t\t<Button onClick={this.killVisible.bind(this)} color='grey'\n\t    disabled = {this.state.cancelDisabled}> Cancel </Button>\n\n\t\t<Message error content = {this.state.errorMessage} />\n\n\t\t<Message info floating size='big'\n            onClick={this.killVisible.bind(this)}\n            onDismiss={this.killVisible.bind(this)}\n            hidden = {!this.state.updatedVisible}\n            content = {this.state.updatedMessage} />\n\n\n\t    </Form>\n\t\t</div>\n\t\t</Modal.Content>\n\t\t<Modal.Actions>\n\n\t    </Modal.Actions>\n\t\t</Modal>\n\t)}\n}\n\nexport default Profile\n"]},"metadata":{},"sourceType":"module"}