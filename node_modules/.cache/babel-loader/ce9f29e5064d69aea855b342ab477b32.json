{"ast":null,"code":"import _defineProperty from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yimeng/Documents/fish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import ls from'local-storage';import LoginForm from\"./components/Login\";import Fish from\"./components/Fish\";import{gS}from\"./gSession.js\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={curUser:null,appState:{}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var curUser,appState,u;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:curUser=ls.get('curUser');appState=ls.get('appState');if(!curUser){_context.next=8;break;}u={id:curUser.id,name:curUser.name};gS.setCreds(u);_context.next=7;return gS.restore();case 7:// wait until we get the data back from the server\nthis.setState({curUser:curUser});case 8:if(appState){this.setState({appState:appState});}case 9:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"updateState\",value:function updateState(key,data){this.setState(_defineProperty({},key,data));ls.set(key,data);}// remoteUpdateState = this.updateState.bind(this)\n},{key:\"updateFishState\",value:function updateFishState(key,data){var aS=this.state.appState;aS[key]=data;this.setState({appState:aS});ls.set('appState',aS);}},{key:\"renderLogin\",value:function renderLogin(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(LoginForm,{updateAppState:this.updateState.bind(this),appKey:\"curUser\"}));}},{key:\"renderFish\",value:function renderFish(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Fish,{updateAppState:this.updateState.bind(this),appKey:\"curUser\",curUser:this.state.curUser,updateFishState:this.updateFishState.bind(this),appState:this.state.appState}));}},{key:\"render\",value:function render(){if(!this.state.curUser||this.state.curUser.id<0){return this.renderLogin();}else{return this.renderFish();}}}]);return App;}(React.Component);export default App;// \t\t<LoginForm updateAppState=this.updateState.bind(this)/>\n//   verifyLogin(){\n// // Axios call to the database\n// uname=\"fish1\"\n//   }\n// <LoginForm updateAppState=this.updateState.bind(this) />\n// <LoginForm updateAppState=App.updateState.bind(App) /> we're in App component right now\n// We are invoking the component LoginForm\n//   updateAppState is a prop(erty) of LoginForm\n//  value of updateAppState is a function\n//     that function is this.updateState where this is App\n//  but we .bind(this) to that function\n//    this is equivalent to saying .bind(App)\n//  means that when updateAppState runs inside LoginForm\n//    then this.* inside updateAppState will be App (because\n//     this passed to bind is in the App component)","map":{"version":3,"sources":["/Users/yimeng/Documents/fish/src/App.js"],"names":["React","ls","LoginForm","Fish","gS","App","state","curUser","appState","get","u","id","name","setCreds","restore","setState","key","data","set","aS","updateState","bind","updateFishState","renderLogin","renderFish","Component"],"mappings":"o/BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,EAAP,KAAe,eAAf,CAEA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CAIA,OAASC,EAAT,KAAmB,eAAnB,C,GAEMC,CAAAA,G,2TACFC,K,CAAQ,CACXC,OAAO,CAAI,IADA,CAEXC,QAAQ,CAAG,EAFA,C,oTAMDD,O,CAAUN,EAAE,CAACQ,GAAH,CAAO,SAAP,C,CACVD,Q,CAAWP,EAAE,CAACQ,GAAH,CAAO,UAAP,C,KAEXF,O,yBACHG,C,CAAI,CACJC,EAAE,CAAEJ,OAAO,CAACI,EADR,CAEJC,IAAI,CAAGL,OAAO,CAACK,IAFX,C,CAIRR,EAAE,CAACS,QAAH,CAAYH,CAAZ,E,sBACMN,CAAAA,EAAE,CAACU,OAAH,E,QAAa;AACnB,KAAKC,QAAL,CAAc,CAACR,OAAO,CAAGA,OAAX,CAAd,E,OAEH,GAAIC,QAAJ,CAAa,CACT,KAAKO,QAAL,CAAc,CAACP,QAAQ,CAAGA,QAAZ,CAAd,EACH,C,wNAGcQ,G,CAAKC,I,CAAK,CACzB,KAAKF,QAAL,oBAAgBC,GAAhB,CAAwBC,IAAxB,GACAhB,EAAE,CAACiB,GAAH,CAAOF,GAAP,CAAYC,IAAZ,EACI,CACD;wDAEgBD,G,CAAKC,I,CAAK,CAC7B,GAAIE,CAAAA,EAAE,CAAG,KAAKb,KAAL,CAAWE,QAApB,CACAW,EAAE,CAACH,GAAD,CAAF,CAAUC,IAAV,CACA,KAAKF,QAAL,CAAc,CAACP,QAAQ,CAAGW,EAAZ,CAAd,EACAlB,EAAE,CAACiB,GAAH,CAAO,UAAP,CAAmBC,EAAnB,EACI,C,iDAIY,CAChB,mBACI,4CACH,oBAAC,SAAD,EAAW,cAAc,CAAI,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAA7B,CAA0D,MAAM,CAAI,SAApE,EADG,CADJ,CAKI,C,+CAEW,CACf,mBACK,4CAEJ,oBAAC,IAAD,EAAM,cAAc,CAAI,KAAKD,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAxB,CACU,MAAM,CAAI,SADpB,CAEU,OAAO,CAAI,KAAKf,KAAL,CAAWC,OAFhC,CAGU,eAAe,CAAI,KAAKe,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAH7B,CAIG,QAAQ,CAAI,KAAKf,KAAL,CAAWE,QAJ1B,EAFI,CADL,CAWI,C,uCAGO,CACX,GAAI,CAAC,KAAKF,KAAL,CAAWC,OAAZ,EAAuB,KAAKD,KAAL,CAAWC,OAAX,CAAmBI,EAAnB,CAAwB,CAAnD,CAAuD,CACnD,MAAS,MAAKY,WAAL,EAAT,CACI,CAFR,IAGI,CACA,MAAQ,MAAKC,UAAL,EAAR,CACH,CACG,C,iBArEaxB,KAAK,CAACyB,S,EAwExB,cAAepB,CAAAA,GAAf,CACA;AAEE;AACD;AACA;AACC;AAGF;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA","sourcesContent":["import React from 'react';\nimport ls from 'local-storage'\n\nimport LoginForm from \"./components/Login\";\nimport Fish from \"./components/Fish\";\n\n\n\nimport { gS } from \"./gSession.js\"\n\nclass App extends React.Component {\n    state = {\n\tcurUser  : null,\n\tappState : {},\n    }\n\n   async componentDidMount(){\n       var curUser = ls.get('curUser')\n       var appState = ls.get('appState')\n\n       if (curUser){\n\t   var u = {\n\t       id: curUser.id,\n\t       name : curUser.name\n\t   }\n\t   gS.setCreds(u)\n\t   await gS.restore() // wait until we get the data back from the server\n\t   this.setState({curUser : curUser})\n\t}\n\tif (appState){\n\t    this.setState({appState : appState})\n\t}\n    }\n\n    updateState(key, data){\n\tthis.setState({[key] :  data})\n\tls.set(key, data) \n    }\n    // remoteUpdateState = this.updateState.bind(this)\n\n    updateFishState(key, data){\n\tlet aS = this.state.appState;\n\taS[key] = data;\n\tthis.setState({appState : aS})\n\tls.set('appState', aS)\n    }\n    \n    \n\n    renderLogin(){\n\treturn (\n   \t\t<div>\n\t\t<LoginForm updateAppState = {this.updateState.bind(this)} appKey = {\"curUser\"} />\n\t\t</div>\n\t)\n    }\n\n    renderFish(){\n\treturn(\n\t    \t<div>\n\t\t\n\t\t<Fish updateAppState = {this.updateState.bind(this)}\n            appKey = {\"curUser\"}\n            curUser = {this.state.curUser}\n            updateFishState = {this.updateFishState.bind(this)}\n\t    appState = {this.state.appState}\n\t\t/>\n\t\t</div>\n\t)\n    }\n    \n   \n    render(){\n\tif (!this.state.curUser || this.state.curUser.id < 0  ){\n\t    return ( this.renderLogin() )\n        }\n\telse{\n\t    return( this.renderFish())\n\t}\t\n    }\n}\n\nexport default App;\n// \t\t<LoginForm updateAppState=this.updateState.bind(this)/>\n\n  //   verifyLogin(){\n\t// // Axios call to the database\n\t// uname=\"fish1\"\n  //   }\n\n\n// <LoginForm updateAppState=this.updateState.bind(this) />\n// <LoginForm updateAppState=App.updateState.bind(App) /> we're in App component right now\n\n// We are invoking the component LoginForm\n//   updateAppState is a prop(erty) of LoginForm\n\n//  value of updateAppState is a function\n//     that function is this.updateState where this is App\n\n//  but we .bind(this) to that function\n//    this is equivalent to saying .bind(App)\n\n//  means that when updateAppState runs inside LoginForm\n//    then this.* inside updateAppState will be App (because\n//     this passed to bind is in the App component)\n"]},"metadata":{},"sourceType":"module"}